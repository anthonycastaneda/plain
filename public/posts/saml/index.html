<!DOCTYPE html>
<html lang="en-us" dir="ltr">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Working with SAML | Anthony Casta√±eda</title>
<meta name="description" content="Fun with DevTools">
<meta property="og:title" content="Working with SAML">
<meta property="og:description" content="Fun with DevTools">
<meta property="og:type" content="article">
<meta property="og:url" content="http://localhost:1313/posts/saml/">
<link rel="apple-touch-icon" sizes="57x57" href="/favicon_io/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/favicon_io/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/favicon_io/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/favicon_io/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/favicon_io/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/favicon_io/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/favicon_io/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/favicon_io/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/favicon_io/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/favicon_io/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon_io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon_io/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon_io/favicon-16x16.png">
<link rel="manifest" href="/favicon_io/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/favicon_io/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">


    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/custom.css">


</head>

<body>
  <header>
    <nav class="path-nav">
  <ol>
    
  
    
  
    
  
  <li>
    /
    <a href="/">Anthony Casta√±eda</a>
    /
  </li>

  
  <li>
    
    <a href="/posts/">Posts</a>
    /
  </li>

  
  <li class="current">
    
    <a href="/posts/saml/">Working with SAML</a>
    
  </li>

  </ol>
</nav>




  </header>
  <main>
    
  <h1>Working with SAML</h1>
  
  <div class="terms-list">
    <ul>
        <li><a href="/tags/sso/">#SSO</a></li>
    </ul>
  </div>


  
  
  
  
    <nav class="toc">
      <strong>Table of contents</strong>
      <div class="toc-content">
        <nav id="TableOfContents">
  <ol>
    <li><a href="#troubleshooting-saml-using-your-browsers-devtools">Troubleshooting SAML Using Your Browser‚Äôs DevTools</a></li>
    <li><a href="#a-quick-refresher-how-saml-works">A Quick Refresher: How SAML Works</a></li>
    <li><a href="#step-1-open-devtools-and-preserve-the-trail">Step 1: Open DevTools and Preserve the Trail</a></li>
    <li><a href="#step-2-identify-the-saml-requests">Step 2: Identify the SAML Requests</a></li>
    <li><a href="#step-3-inspect-the-samlrequest-sp--idp">Step 3: Inspect the SAMLRequest (SP ‚Üí IdP)</a>
      <ol>
        <li><a href="#where-to-look">Where to Look</a></li>
        <li><a href="#what-to-check">What to Check</a></li>
      </ol>
    </li>
    <li><a href="#step-4-decode-and-inspect-the-samlresponse-idp--sp">Step 4: Decode and Inspect the SAMLResponse (IdP ‚Üí SP)</a>
      <ol>
        <li><a href="#find-the-response">Find the Response</a></li>
        <li><a href="#decode-the-response">Decode the Response</a></li>
        <li><a href="#what-to-validate-in-the-xml">What to Validate in the XML</a></li>
      </ol>
    </li>
    <li><a href="#step-5-look-for-signature-and-certificate-issues">Step 5: Look for Signature and Certificate Issues</a></li>
    <li><a href="#step-6-use-the-console-for-silent-failures">Step 6: Use the Console for Silent Failures</a></li>
    <li><a href="#step-7-compare-a-working-vs-broken-flow">Step 7: Compare a Working vs Broken Flow</a></li>
    <li><a href="#common-saml-issues-you-can-spot-with-devtools">Common SAML Issues You Can Spot with DevTools</a></li>
    <li><a href="#final-thoughts">Final Thoughts</a></li>
  </ol>
</nav>
      </div>
    </nav>
  

  
  <h2 id="troubleshooting-saml-using-your-browsers-devtools">Troubleshooting SAML Using Your Browser‚Äôs DevTools</h2>
<p>Single Sign-On (SSO) with SAML can feel opaque when something goes wrong. Users see a vague error, identity providers log something cryptic, and service providers often just say ‚Äúauthentication failed.‚Äù Fortunately, your browser already has one of the most powerful SAML troubleshooting tools built in: <strong>Developer Tools (DevTools)</strong>.</p>
<p>This post walks through a practical, repeatable approach to debugging SAML flows using browser DevTools, focusing on Chrome (the concepts apply equally to Firefox, Edge, and Safari).</p>
<hr>
<h2 id="a-quick-refresher-how-saml-works">A Quick Refresher: How SAML Works</h2>
<p>Before debugging, it helps to align on the basic SAML flow:</p>
<ol>
<li><strong>User accesses the Service Provider (SP)</strong></li>
<li>SP redirects the browser to the <strong>Identity Provider (IdP)</strong> with a <code>SAMLRequest</code></li>
<li>User authenticates at the IdP</li>
<li>IdP POSTs a <code>SAMLResponse</code> back to the SP</li>
<li>SP validates the response and logs the user in</li>
</ol>
<p>Every one of these steps passes through the browser, which means DevTools can see it.</p>
<hr>
<h2 id="step-1-open-devtools-and-preserve-the-trail">Step 1: Open DevTools and Preserve the Trail</h2>
<ol>
<li>
<p>Open your browser‚Äôs DevTools (<code>Cmd+Option+I</code> on macOS, <code>Ctrl+Shift+I</code> on Windows)</p>
</li>
<li>
<p>Go to the <strong>Network</strong> tab</p>
</li>
<li>
<p>Enable:</p>
<ul>
<li>‚úÖ <strong>Preserve log</strong> (critical‚ÄîSAML involves redirects)</li>
<li>‚úÖ <strong>Disable cache</strong> (optional but helpful)</li>
</ul>
</li>
</ol>
<p>Now reproduce the login issue from the start.</p>
<hr>
<h2 id="step-2-identify-the-saml-requests">Step 2: Identify the SAML Requests</h2>
<p>In the Network tab, filter using:</p>
<ul>
<li><code>SAML</code></li>
<li><code>login</code></li>
<li><code>acs</code></li>
<li><code>SSO</code></li>
</ul>
<p>You are typically looking for:</p>
<ul>
<li>A <strong>redirect (302)</strong> to the IdP containing a <code>SAMLRequest</code></li>
<li>A <strong>POST</strong> back to the SP containing a <code>SAMLResponse</code></li>
</ul>
<p>Click on each request and inspect it closely.</p>
<hr>
<h2 id="step-3-inspect-the-samlrequest-sp--idp">Step 3: Inspect the SAMLRequest (SP ‚Üí IdP)</h2>
<p>Select the request that redirects to the IdP.</p>
<h3 id="where-to-look">Where to Look</h3>
<ul>
<li><strong>Headers ‚Üí Request URL</strong></li>
<li><strong>Payload / Query Parameters</strong></li>
</ul>
<p>You should see a <code>SAMLRequest</code> parameter. This is usually:</p>
<ul>
<li>Base64-encoded</li>
<li>Often DEFLATE-compressed</li>
</ul>
<h3 id="what-to-check">What to Check</h3>
<ul>
<li><strong>Destination URL</strong>: Is the browser being sent to the correct IdP endpoint?</li>
<li><strong>RelayState</strong>: Is it present and reasonable?</li>
<li><strong>Binding</strong>: Redirect binding vs POST binding (mismatch can break flows)</li>
</ul>
<p>If the redirect never happens, the issue is almost certainly on the SP side.</p>
<hr>
<h2 id="step-4-decode-and-inspect-the-samlresponse-idp--sp">Step 4: Decode and Inspect the SAMLResponse (IdP ‚Üí SP)</h2>
<p>This is where most SAML problems live.</p>
<h3 id="find-the-response">Find the Response</h3>
<p>Look for a <strong>POST</strong> request to your Assertion Consumer Service (ACS) URL. In DevTools:</p>
<ul>
<li>Method: <code>POST</code></li>
<li>Content-Type: <code>application/x-www-form-urlencoded</code></li>
<li>Parameter: <code>SAMLResponse</code></li>
</ul>
<h3 id="decode-the-response">Decode the Response</h3>
<ol>
<li>Copy the <code>SAMLResponse</code> value</li>
<li>Base64-decode it (many online tools work, or use <code>base64 --decode</code>)</li>
<li>Open the resulting XML</li>
</ol>
<h3 id="what-to-validate-in-the-xml">What to Validate in the XML</h3>
<p>Check these elements carefully:</p>
<ul>
<li><code>&lt;Issuer&gt;</code> ‚Äì Does it match the expected IdP entity ID?</li>
<li><code>&lt;Audience&gt;</code> ‚Äì Does it match the SP entity ID exactly?</li>
<li><code>&lt;Recipient&gt;</code> ‚Äì Matches the ACS URL?</li>
<li><code>&lt;InResponseTo&gt;</code> ‚Äì Matches the original request ID?</li>
<li><code>&lt;Conditions NotBefore / NotOnOrAfter&gt;</code> ‚Äì Is clock skew causing expiration?</li>
<li><code>&lt;NameID&gt;</code> ‚Äì Correct format and value?</li>
<li><code>&lt;AttributeStatement&gt;</code> ‚Äì Are required attributes present?</li>
</ul>
<p>A single character mismatch can cause validation failure.</p>
<hr>
<h2 id="step-5-look-for-signature-and-certificate-issues">Step 5: Look for Signature and Certificate Issues</h2>
<p>Still in the decoded XML:</p>
<ul>
<li>Is the assertion or response <strong>signed</strong>?</li>
<li>Which element is signed (Assertion vs Response)?</li>
<li>Does the certificate match what the SP is configured to trust?</li>
</ul>
<p>Common failures include:</p>
<ul>
<li>Expired IdP certificate</li>
<li>Signing the wrong element</li>
<li>Algorithm mismatches (SHA-1 vs SHA-256)</li>
</ul>
<p>If the SP logs say ‚Äúinvalid signature,‚Äù DevTools plus the decoded XML usually reveal why.</p>
<hr>
<h2 id="step-6-use-the-console-for-silent-failures">Step 6: Use the Console for Silent Failures</h2>
<p>Sometimes the network looks fine, but the browser still errors.</p>
<p>Check the <strong>Console</strong> tab for:</p>
<ul>
<li>CORS errors</li>
<li>Mixed content (HTTP vs HTTPS)</li>
<li>Cookie issues (<code>SameSite=None; Secure</code> is a frequent culprit)</li>
</ul>
<p>Modern browser cookie policies can break otherwise correct SAML flows.</p>
<hr>
<h2 id="step-7-compare-a-working-vs-broken-flow">Step 7: Compare a Working vs Broken Flow</h2>
<p>One of the most effective techniques:</p>
<ol>
<li>
<p>Capture a <strong>working</strong> SAML login in DevTools</p>
</li>
<li>
<p>Capture the <strong>broken</strong> one</p>
</li>
<li>
<p>Compare:</p>
<ul>
<li>Endpoints</li>
<li>Parameters</li>
<li>Decoded XML</li>
</ul>
</li>
</ol>
<p>Differences usually jump out quickly.</p>
<hr>
<h2 id="common-saml-issues-you-can-spot-with-devtools">Common SAML Issues You Can Spot with DevTools</h2>
<ul>
<li>‚ùå Wrong ACS URL</li>
<li>‚ùå Incorrect entity ID</li>
<li>‚ùå Missing or malformed attributes</li>
<li>‚ùå Clock skew / expired assertions</li>
<li>‚ùå Certificate rotation not updated</li>
<li>‚ùå Cookie <code>SameSite</code> misconfiguration</li>
</ul>
<p>All of these are visible from the browser.</p>
<hr>
<h2 id="final-thoughts">Final Thoughts</h2>
<p>SAML may feel like ‚Äúblack box‚Äù authentication, but it isn‚Äôt. Because SAML relies on browser redirects and POSTs, <strong>DevTools gives you near-complete visibility into the flow</strong>.</p>
<p>If you can:</p>
<ul>
<li>Capture the network traffic</li>
<li>Decode the assertions</li>
<li>Read the XML carefully</li>
</ul>
<p>You can debug most SAML issues without guessing‚Äîor waiting days on another team.</p>
<p>Once you get comfortable with DevTools, SAML troubleshooting becomes less of a mystery and more of a checklist.</p>
<p>Happy debugging üîç</p>

  <div class="time"><time datetime="2026-01-11">2026-01-11&nbsp;</time>
</div>

  
  
    <div class="comments">

</div>
  

  
    <div class="terminal-nav">
      <div class="back-nav">
        <a href="../" class="back-link">../</a>
      </div>
    </div>
  

  </main>
  <footer>
    <p>
  &copy; Copyright 2026 &middot;
  <a href="https://github.com/anthonycastaneda">Anthony Casta√±eda</a>
</p>
  </footer>
</body>

</html>